{{#partial "title"}}
    Hero To Squad Page
{{/partial}}
{{#partial "content"}}
    <div class="viewer" style="background-image: url('https://wallpapertag.com/wallpaper/full/b/a/2/784583-gorgerous-marvel-heroes-wallpapers-2560x1600.jpg');background-repeat: no-repeat; background-size: cover; background-position: cover;">
        <div class="jumbotron text-center bg-light">
            <h2 class="h2-responsive light center text-Royal blue animated wobble"><strong>HERO TO SQUAD <i class="fas fa-users animate rotateIn infinite"></i></strong></h2>
            <div class="form-group md-form">
                <a class="btn btn-outline-royal blue" href="/"><strong>Back to Home Page</strong></a>
            </div>
            <div class="centre">
                <table class="table table-striped table-dark">
                    <thead>
                    <tr>
                        <th class="text-info">Squad</th>
                        <th class="text-info">Max Size</th>
                        <th class="text-info">Cause</th>
                        <th></th> <!-- Delete button column for squad -->
                    </tr>
                    </thead>
                    <tbody>
                    <tr>
                        <td>{{ squadDetails.squad }}</td>
                        <td>{{ squadDetails.size }}</td>
                        <td>{{ squadDetails.cause }}</td>
                        <td>
                            <form action="/delete-squad/{{squad}}" method="POST" onsubmit="return confirm('Are you sure you want to delete this squad?')">
                                <button type="submit" class="btn btn-danger"><i class="fas fa-trash"></i></button>
                            </form>
                        </td>
                    </tr>
                    </tbody>
                </table>
                <table class="table table-striped table-dark">
                    <thead>
                    <tr>
                        <th class="text-info">Hero Name</th>
                        <th class="text-info">Age</th>
                        <th class="text-info">Special Power</th>
                        <th class="text-info">Weakness</th>
                        <th></th> <!-- Delete button column for hero -->
                    </tr>
                    </thead>
                    <tbody>
                    {{#each assignedHeroes}}
                        <tr>
                            <td>{{ heroName }}</td>
                            <td>{{ age }}</td>
                            <td>{{ specialPower }}</td>
                            <td>{{ weakness }}</td>
                            <td>
                                <form action="/delete-hero/{{heroName}}" method="POST" onsubmit="return confirm('Are you sure you want to delete this hero?')">
                                    <button type="submit" class="btn btn-danger"><i class="fas fa-trash"></i></button>
                                </form>
                            </td>
                        </tr>
                    {{/each}}
                    </tbody>
                </table>
            </div>
        </div>
    </div>
{{!--    // THIS CODE ALLOWS THE ASSIGN HERO-TO-SQUAD NOT TO THROW AN EXCEPTION OF UNMAP ROUTE--}}
    <script>
    document.getElementById('squadForm').addEventListener('submit', function(e) {
        e.preventDefault(); // Prevent form submission

        var squad = document.getElementById('squad').value;
        var heroName = document.getElementById('heroName').value;

        var formAction = '/assign-hero/' + encodeURIComponent(squad);
        document.getElementById('squadForm').action = formAction;

        // Submit the form
        document.getElementById('squadForm').submit();
    });
</script>

{{/partial}}

{{> layout.hbs}}